description: >
  Deploys to Skpr.

parameters:
  docker_image:
    default: "skpr/cli:latest"
    description: "The Skpr CLI version tag"
    type: string
  env:
    type: string
    default: ""
    description: "The app environment"
  title:
    type: string
    description: "Tile of the job to appear in CircleCI's interface."
    default: "Skpr Deploy"
  version:
    type: string
    default: ""
    description: "The app version"

steps:
  - run:
      environment:
        SKPR_CLI_DOCKER_IMAGE: <<parameters.docker_image>>
        SKPR_VERSION: <<parameters.version>>
        SKPR_ENV: <<parameters.env>>
      name: <<parameters.title>>
      command: <<include(scripts/deploy.sh)>>
