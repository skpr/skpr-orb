description: >
  Packages an app for deployment.

parameters:
  file:
    type: string
    default: ""
    description: "The filepath to pass onto trivy, conflicts with trivy_image."
  image:
    type: string
    default: ""
    description: "The image type to scan. Conflicts with trivy_file, and must be either 'compile' or 'runtime'."

steps:
  - run:
      environment:
        PARAM_IMAGE: <<parameters.image>>
        PARAM_FILE: <<parameters.file>>
      name: Scan
      command: <<include(scripts/trivy.sh)>>
